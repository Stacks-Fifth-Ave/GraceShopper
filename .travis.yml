language: node_js
node_js:
  - node
services:
  - postgresql
addons:
  postgresql: '10'
dist: xenial
notifications:
  email:
    on_success: change
    on_failure: always
install:
  - npm ci
before_script:
  - psql -c 'create database "stacks-fifth-test";' -U postgres
script:
  - npm test
  - npm run build-client

env:
  global:
    secure: KbYPJ1GzVG+CP5vSqKDXrRoKU8F1lByVTauDmJ1BAvSIxMeUX2osVpxPRTFXLt9GLpMLaJbUVe1AkqAIsvtXvqVy1yrFpCrHYY/RgDlJWEgjPEBy4doqcPL0N6ApszBqocUjFhQ+o5lmwJzLOb6RaLKglP51u2zapIQBVWnRHWn0ASkrh12yiILaelzMvHzrvJB5FywGQn6YXnGM6EvqboPogC3mkKWUCAsEPEYNycHui0oZ4XIdUbdgi0Z40dr5NS/yW9NGxs1EG6HWO51ITQdpmiNwHodGL8m/npGlbc1rzZU7s1LJRtLSi+tu5R51Xx3FYUBcorJCaESddqY62QsiG6J417yh7kcRaYEL8K4JZSwg9ZemL23myApNhNJnD/DK6RWLrk4wYT/8HzW6wjy1L0jewKpW8yswyNaZkkL+RMAldwzvLkZcapn4VVX4P+rkv+6AqKKXSPCE+6EEVNwPDa9DAMRpPoWjchltsJyZ6Oj5dktSYX6I0GAa0umphZ7oEGbJWClrv2MRZDOuQ3ysZy34Lj6dIz4WY28FGA5nj6a5hHLTu+YyZ+AHVBGch3e7PXh/t0qHYrGZ5GIKWdF/zYdtcWa4viodapdw5OVkd2hX0p0IqhcLOp/AA05pjeu9YA6y2p5G9+XAUL3ojzHs8X0uQP5D4k54MqXBQh4=
before_deploy: # omit node_modules, since we set skip_cleanup below
  - rm -rf node_modules
deploy: # see README for details on these keys
  # prevents travis from deleting the build
  skip_cleanup: true
  provider: heroku
  # app should be your heroku app name; see README
  app: stacksfifth
  # the secure key indicates an encrypted value; see README
  api_key:
    secure: UW+KVImY5EbuwjMGEAU4iFolouQNqPCmV+RjGrmamyiJWj2EO9BaIq9FlZ3NxnTsdYOf+EO2Mo/S/bWJFmopisGODacYVYi/1ggJp2zTd8s0vaQOaf4XT7bU8874aeIuFaiXQ94vOziHhogOTB0LGlTcaXIAdtGQg/f9wRz1bP1VW2l/IV8xbwXMthdoVpAoH7nHY1rKs4wb6B59FJy9C2w/xbu5i2aVH+Hkpi0ghZTOTMiL0xQYL9IQgIM3Gu6+vJ/XzInRwOO7+UzQzxnD3EkM1lubkZSDNLNylc3yXp5w1OAyCKChZ9Eygu2Fq3Qt+1sCykOwiT3re9e98ZaptnIAFlT/G5h7Dn0LNF6XH9n4q+HFGlpejU0IuKmwDKHY/sWQ5fesX/VDF4kpNzqCTZseTubJmNx19e7NpC1UXKKJgyGDjRjQJCT3fF5ioltVXnZhpEJI4hoDXt/ArfmE4y+1LszF5cKEeGrp6dgT0QHSfHneh+wfRUSj1TU6pYfMMmpTtd37gYVralnAvSUdy6eaHnW5tcpScIdfuNG+kZ1vekUv8xUSmCEwNsOx2rTyM6dlZZ9VGsRD/epcCoKAeUiK1f9c9nTAtZDVf6vx68wDV9E+va5vi7kCW3EKj5LzPPpurEq4Lkt0dQ8ZU0/Anbnn7shNd2GKG8oSKSS10vE=
